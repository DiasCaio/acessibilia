{"version":3,"file":"options.min.js","sources":["../src/options.js"],"sourcesContent":["// amd/src/options.js\n// Registro e acesso às opções do tiny_acessibilia (lado TinyMCE).\n// As values efetivas vêm do servidor (settings.php → plugininfo.php).\n// Aqui definimos o namespace, os tipos e defaults de segurança.\n\nimport {getPluginOptionName} from 'editor_tiny/options';\nimport {pluginName} from './common';\n\n// Sufixos em snake_case — devem coincidir com as chaves retornadas no plugininfo.php\nconst KEYS = {\n  API_URL: 'apiurl',\n  MODEL: 'model',\n  PROMPT: 'prompt',\n  TIMEOUT: 'timeout',\n  LOGS_ENABLED: 'logs',\n  FORCE_ALT: 'forcealt',\n  ALLOW_DECORATIVE: 'allowdecorative',\n  API_KEY_PROVIDED: 'apikeyprovided',\n};\n\nconst on = (key) => getPluginOptionName(pluginName, key);\n\nexport const register = (editor) => {\n  // Strings\n  editor.options.register(on(KEYS.API_URL), {\n    processor: 'string',\n    default: 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent',\n  });\n\n  editor.options.register(on(KEYS.MODEL), {\n    processor: 'string',\n    default: 'gemini-2.0-flash',\n  });\n\n  editor.options.register(on(KEYS.PROMPT), {\n    processor: 'string',\n    default: 'Gere uma descrição objetiva e útil para leitores de tela, em português.',\n  });\n\n  // Number\n  editor.options.register(on(KEYS.TIMEOUT), {\n    processor: 'number',\n    default: 15000, // ms\n  });\n\n  // Booleans\n  editor.options.register(on(KEYS.LOGS_ENABLED), {\n    processor: 'boolean',\n    default: true,\n  });\n\n  editor.options.register(on(KEYS.FORCE_ALT), {\n    processor: 'boolean',\n    default: true,\n  });\n\n  editor.options.register(on(KEYS.ALLOW_DECORATIVE), {\n    processor: 'boolean',\n    default: true,\n  });\n\n  editor.options.register(on(KEYS.API_KEY_PROVIDED), {\n    processor: 'boolean',\n    default: false,\n  });\n};\n\n// Getters convenientes\nexport const getApiUrl = (editor) => editor.options.get(on(KEYS.API_URL));\nexport const getModel = (editor) => editor.options.get(on(KEYS.MODEL));\nexport const getPrompt = (editor) => editor.options.get(on(KEYS.PROMPT));\nexport const getTimeout = (editor) => Number(editor.options.get(on(KEYS.TIMEOUT))) || 15000;\n\nexport const isLogsEnabled = (editor) => !!editor.options.get(on(KEYS.LOGS_ENABLED));\nexport const isForceAlt = (editor) => !!editor.options.get(on(KEYS.FORCE_ALT));\nexport const isDecorativeAllowed = (editor) => !!editor.options.get(on(KEYS.ALLOW_DECORATIVE));\nexport const isApiKeyProvided = (editor) => !!editor.options.get(on(KEYS.API_KEY_PROVIDED));\n\nexport default {\n  register,\n  getApiUrl,\n  getModel,\n  getPrompt,\n  getTimeout,\n  isLogsEnabled,\n  isForceAlt,\n  isDecorativeAllowed,\n  isApiKeyProvided,\n};\n"],"names":["KEYS","on","key","pluginName","register","editor","options","processor","default","getApiUrl","get","getModel","getPrompt","getTimeout","Number","isLogsEnabled","isForceAlt","isDecorativeAllowed","isApiKeyProvided"],"mappings":"0YASMA,aACK,SADLA,WAEG,QAFHA,YAGI,SAHJA,aAIK,UAJLA,kBAKU,OALVA,eAMO,WANPA,sBAOc,kBAPdA,sBAQc,iBAGdC,GAAMC,MAAQ,gCAAoBC,mBAAYD,KAEvCE,SAAYC,SAEvBA,OAAOC,QAAQF,SAASH,GAAGD,cAAe,CACxCO,UAAW,SACXC,QAAS,6FAGXH,OAAOC,QAAQF,SAASH,GAAGD,YAAa,CACtCO,UAAW,SACXC,QAAS,qBAGXH,OAAOC,QAAQF,SAASH,GAAGD,aAAc,CACvCO,UAAW,SACXC,QAAS,4EAIXH,OAAOC,QAAQF,SAASH,GAAGD,cAAe,CACxCO,UAAW,SACXC,QAAS,OAIXH,OAAOC,QAAQF,SAASH,GAAGD,mBAAoB,CAC7CO,UAAW,UACXC,SAAS,IAGXH,OAAOC,QAAQF,SAASH,GAAGD,gBAAiB,CAC1CO,UAAW,UACXC,SAAS,IAGXH,OAAOC,QAAQF,SAASH,GAAGD,uBAAwB,CACjDO,UAAW,UACXC,SAAS,IAGXH,OAAOC,QAAQF,SAASH,GAAGD,uBAAwB,CACjDO,UAAW,UACXC,SAAS,sCAKAC,UAAaJ,QAAWA,OAAOC,QAAQI,IAAIT,GAAGD,kDAC9CW,SAAYN,QAAWA,OAAOC,QAAQI,IAAIT,GAAGD,8CAC7CY,UAAaP,QAAWA,OAAOC,QAAQI,IAAIT,GAAGD,iDAC9Ca,WAAcR,QAAWS,OAAOT,OAAOC,QAAQI,IAAIT,GAAGD,iBAAmB,0CAEzEe,cAAiBV,UAAaA,OAAOC,QAAQI,IAAIT,GAAGD,+DACpDgB,WAAcX,UAAaA,OAAOC,QAAQI,IAAIT,GAAGD,sDACjDiB,oBAAuBZ,UAAaA,OAAOC,QAAQI,IAAIT,GAAGD,+EAC1DkB,iBAAoBb,UAAaA,OAAOC,QAAQI,IAAIT,GAAGD,gFAErD,CACbI,SAAAA,SACAK,UAAAA,UACAE,SAAAA,SACAC,UAAAA,UACAC,WAAAA,WACAE,cAAAA,cACAC,WAAAA,WACAC,oBAAAA,oBACAC,iBAAAA"}