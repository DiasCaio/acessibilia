{"version":3,"file":"configuration.min.js","sources":["../src/configuration.js"],"sourcesContent":["// amd/src/configuration.js\n// Tiny Acessibilia configuration — alinha com o plugin de mídia.\n\nimport {buttonName, menuItemName} from './common';\n\n/**\n * Garante que o item do Acessibilia exista no menu Insert.\n */\nconst configureMenu = (menu) => {\n  if (!menu.insert) {\n    menu.insert = {items: ''};\n  } else if (typeof menu.insert.items !== 'string') {\n    menu.insert.items = String(menu.insert.items || '');\n  }\n\n  const item = menuItemName;\n  const pattern = new RegExp(`\\\\b${item}\\\\b`);\n  if (!pattern.test(menu.insert.items)) {\n    menu.insert.items = menu.insert.items ? `${menu.insert.items} ${item}` : item;\n  }\n  return menu;\n};\n\n/**\n * Adiciona o botão do Acessibilia no início da seção 'content' da toolbar.\n */\nconst configureToolbar = (toolbar) => {\n  return toolbar.map((section) => {\n    if (section.name === 'content') {\n      if (!section.items.includes(buttonName)) {\n        section.items.unshift(buttonName);\n      }\n    }\n    return section;\n  });\n};\n\nexport const configure = (instanceConfig) => {\n  // DEBUG: veja se as opções namespaced estão aqui\n  console.log('[acessibilia] instanceConfig',\n    instanceConfig && {\n      apiurl: instanceConfig['tiny_acessibilia:apiurl'],\n      prompt: instanceConfig['tiny_acessibilia:prompt'],\n      apikeyprovided: instanceConfig['tiny_acessibilia:apikeyprovided'],\n    }\n  );\n  // FIM DO DEBUG\n  return {\n    menu: configureMenu(instanceConfig.menu),\n    toolbar: configureToolbar(instanceConfig.toolbar),\n  };\n};\n\nexport default {configure};\n"],"names":["configureMenu","menu","insert","items","String","item","menuItemName","RegExp","test","configure","instanceConfig","console","log","apiurl","prompt","apikeyprovided","toolbar","map","section","name","includes","buttonName","unshift"],"mappings":"oMAQMA,cAAiBC,OAChBA,KAAKC,OAE8B,iBAAtBD,KAAKC,OAAOC,QAC5BF,KAAKC,OAAOC,MAAQC,OAAOH,KAAKC,OAAOC,OAAS,KAFhDF,KAAKC,OAAS,CAACC,MAAO,UAKlBE,KAAOC,4BACG,IAAIC,oBAAaF,aACpBG,KAAKP,KAAKC,OAAOC,SAC5BF,KAAKC,OAAOC,MAAQF,KAAKC,OAAOC,gBAAWF,KAAKC,OAAOC,kBAASE,MAASA,MAEpEJ,MAiBIQ,UAAaC,wBAExBC,QAAQC,IAAI,+BACVF,gBAAkB,CAChBG,OAAQH,eAAe,2BACvBI,OAAQJ,eAAe,2BACvBK,eAAgBL,eAAe,qCAI5B,CACLT,KAAMD,cAAcU,eAAeT,MACnCe,SAvBsBA,QAuBIN,eAAeM,QAtBpCA,QAAQC,KAAKC,UACG,YAAjBA,QAAQC,OACLD,QAAQf,MAAMiB,SAASC,qBAC1BH,QAAQf,MAAMmB,QAAQD,qBAGnBH,aAPeF,IAAAA,mDA2BX,CAACP,UAAAA"}