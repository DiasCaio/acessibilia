define("tiny_acessibilia/ai_client",["exports","core/ajax","./options"],(function(_exports,_ajax,Options){var obj;function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.generateAlt=_exports.default=void 0,_ajax=(obj=_ajax)&&obj.__esModule?obj:{default:obj},Options=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(Options);const METHOD="tiny_acessibilia_generate_alt",fileToBase64Parts=file=>new Promise(((resolve,reject)=>{const fr=new FileReader;fr.onload=()=>{const m=String(fr.result||"").match(/^data:([^;]+);base64,(.*)$/);if(!m)return reject(new Error("dataurl-parse-failed"));resolve({mime:m[1],data:m[2]})},fr.onerror=reject,fr.readAsDataURL(file)})),generateAlt=async function(editor,file){var _opts$prompt;let opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!file)throw new Error("no-file");const{mime:mime,data:data}=await fileToBase64Parts(file),args={prompt:null!==(_opts$prompt=opts.prompt)&&void 0!==_opts$prompt?_opts$prompt:Options.getPrompt(editor)||"",model:Options.getModel(editor)||"gemini-2.0-flash",image:{mime:mime,data:data}};return _ajax.default.call([{methodname:METHOD,args:args}])[0]};_exports.generateAlt=generateAlt;var _default={generateAlt:generateAlt};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=ai_client.min.js.map